{% extends 'base.html' %}

{% block heading %} Задачи на {{ date.strftime('%e.%m.%Y') }} {% endblock %}
{% block meta %}
    <style type="text/css">
        dl.needs-and-plans dt {
            margin-top: .5em;
            border-top: 1px solid #ddd;
            font-weight: normal;
            color: #777;
            line-height: 1.7em;
        }
        dl.needs-and-plans dt em {
            font-style: normal;
        }
        dl.needs-and-plans dd {
            line-height: 2em;
        }
        dl.needs-and-plans dd del {
            color: ForestGreen;
        }
    </style>
{% endblock %}
{% block content %}

    <ul class="nav nav-tabs">
        <li><a href="{{ url_for('flare.day_full', year=date.year, month=date.month, day=date.day) }}">Всё</a></li>
        <li class="active">
            <a href="#">Задачи</a>
        </li>
    </ul>

    <ul class="pager">
        <li> {# class="previous">#}
            <a href="{{ url_for('flare.day_tasks', year=prev.year, month=prev.month, day=prev.day) }}">&larr; {{ prev.strftime('%e %b') }}</a>
        </li>
        <li>{{ date.strftime('%e %b %Y') }}</li>
        <li> {# class="next">#}
            <a href="{{ url_for('flare.day_tasks', year=next.year, month=next.month, day=next.day) }}">{{ next.strftime('%e %b') }} &rarr;</a>
        </li>
    </ul>

    {% if items %}
        <dl class="needs-and-plans">
        {% for item in items %}
            <dt>
                {% if item.need %}
                    <em>{{ item.need }}</em> — для этого:
                {% else %}
                    Цель не указана:
                {% endif %}
            </dt>
            {% for task in item.plan %}
                <dd>
                    <span class="label
                        {% if task.status == 'done' %}
                            label-success
                        {% elif task.status == 'waiting' %}
                            label-info
                        {% elif not task.status or task.status == 'todo' %}
                            label-warning
                        {% endif %}
                    ">
                        {{ task.status or "todo" }}</span>
                    {% if task.status == 'done' %}
                        <del>{{ task.action }}</del>
                    {% else %}
                        {{ task.action }}
                    {% endif %}
                    <!--p style="color: gray;">→ {{ item.need }}</p-->
                </dd>
            {% endfor %}
        {% endfor %}
        </dl>
    {% else %}
        <div class="alert alert-block">
            <h2 class="alert-heading">Нет данных</h2>
            Попробуйте другой день.
        </div>
    {% endif %}
{% endblock %}
